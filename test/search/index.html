
<!DOCTYPE html>
<html lang="ja" data-figures=""  data-mode="lit" >

<head>
<title>Searches | DP Note</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta property="og:locale" content="ja" />

<meta property="og:type" content="article">
<meta name="description" content="">
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="">
<meta name="twitter:title" content="Searches" />





<meta name="twitter:image" content="https://dpnote.netlify.app/test/" />



<meta property="og:image" content="https://dpnote.netlify.app/test/">


<meta property="og:url" content="https://dpnote.netlify.app/test/search/" />
<meta property="og:title" content="Searches" />
<meta property="og:description" content="" />



<link rel="canonical" href="https://dpnote.netlify.app/test/search/">
<link rel="alternate" type="application/rss+xml" href="https://dpnote.netlify.app/test/search/index.xml" title="DP Note" />

  

  
  

  
  <link rel="preload" href="https://dpnote.netlify.app/test/css/styles.07015b78eada1bea1b52fca88d93e547841340a0660500e57454e8c127831bab2a56a85e088a1ee7723ea931072ac15f3111f1fdc3fe9bdea3f3cca3f0f6b49e.css" integrity="sha512-BwFbeOraG&#43;obUvyojZPlR4QTQKBmBQDldFTowSeDG6sqVqheCIoe53I&#43;qTEHKsFfMRHx/cP&#43;m96j88yj8Pa0ng==" as="style" crossorigin="anonymous">
  

  <link rel="stylesheet" href='https://dpnote.netlify.app/test/css/custom.css'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous"
    referrerpolicy="no-referrer" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/js/all.min.js" integrity="sha512-rpLlll167T5LJHwp0waJCh3ZRf7pO6IT1+LZOhAyP6phAirwchClbTZV3iqL3BMrVxIYRbzGTpli4rfxsCK6Vw==" crossorigin="anonymous" referrerpolicy="no-referrer">
  </script>


  
  <link rel="stylesheet" type="text/css" href="https://dpnote.netlify.app/test/css/styles.07015b78eada1bea1b52fca88d93e547841340a0660500e57454e8c127831bab2a56a85e088a1ee7723ea931072ac15f3111f1fdc3fe9bdea3f3cca3f0f6b49e.css" integrity="sha512-BwFbeOraG&#43;obUvyojZPlR4QTQKBmBQDldFTowSeDG6sqVqheCIoe53I&#43;qTEHKsFfMRHx/cP&#43;m96j88yj8Pa0ng==" crossorigin="anonymous">
  

  <title>サービス内検索 | DP Note</title>

  <style>
    input {
      color: rgba(0, 119, 184, 0.5);
      font-size: 1.2em;
      font-weight: bolder;
      height: 45px;
      padding-left: .2em;
      border-radius: .3em;
    }

    input::-webkit-input-placeholder {
      color: rgba(0, 119, 184, 0.5);
    }

    #exp {
      font-size: 1.2em;
      font-weight: bolder;
      height: 45px;
      background: #007bbb;
      color: #fff;
      padding: .5em;
      cursor: pointer;
      border-radius: .3em;
    }

    #result {
      margin: 1em;
      border-bottom: 1px dotted #000;
    }

    .item_title {
      text-decoration: none;
      color: rgba(0, 119, 184, 1);
      font-weight: bolder;
    }

    .item_ex {
      background: #fff;
      margin: 0.5em 1em 1em 1em;
      padding: 0.5em;
      font-size: smaller;
      border-radius: .5em;
      position: relative;
      height: 98px;
      overflow: hidden;
      padding-right: 8px;
    }

    .item_ex b {
      margin: 0 2px 0 2px;
      padding: 3px;
      color: #666600;
      background-color: #ffffdd;
      font-weight: bold;
      border: 1px solid #bbbb00;
    }

    .item {
      border-top: 1px dotted #000;
      padding-top: 1em;
    }


    #page_list li{
      list-style: none;
      display: inline-block;
      border: 2px solid #007bbb;
      color: #007bbb;
      background-color: #ffffff;
      padding: .5em;
      border-radius: .5em;
      margin-right: .5em;
      cursor: pointer;
      font-weight: bold;
    }

  </style>
</head>

<body data-code="100" data-lines="false" id="documentTop">

  <div id="header1">

    <h1 class="h_h1"><a href="https://dpnote.netlify.app/test/index.html">ＤＰ Ｎｏｔｅ</a></h1>
  </div>

  <div class="h_s"><a href="https://dpnote.netlify.app/test/search/index.html">
    <div class="h_circle"><i class="fas fa-search"></i></div>
  </a></div>
  <main>

    <div class="grid-inverse wrap content">
      <article class="post_content">
        <h1 class="post_title">サービス内検索</h1>
        <p>災害名などのキーワードを入力すると投稿記事を検索することができます。</p>

        <input type="text" name="text1" id="text" size="15" autocomplete="off" autofocus placeholder="キーワード検索" />  <span id="exp" class="search">検 索</span>  <br><br>

        <ul id="page_list"><div id="koumoku"></div></ul>
    
        <p><span id="resultCount"></span></p>

        <div id="result"></div>

      </article>
<aside class="sidebar">
  <section class="sidebar_inner">

    <div>
      <h2 class="mt-4 taxonomy" id="Introduction-section">Introduction</h2>
      <ul class="ul_menu">

        <a href='https://dpnote.netlify.app/test/about/'><li class="li_menu">サービス概要</li></a>

      </ul>

    </div>

    <div>

      <h2 class="mt-4 taxonomy" id="categories-section">Category</h2>
      <ul class="ul_menu">

        <a href='https://dpnote.netlify.app/test/categories/%E5%9C%B0%E9%9C%87/'><li class="li_menu">地震</li></a>

        <a href='https://dpnote.netlify.app/test/categories/%E9%A2%A8%E6%B0%B4%E5%AE%B3/'><li class="li_menu">風水害</li></a>  

        <a href='https://dpnote.netlify.app/test/categories/%E6%B4%A5%E6%B3%A2/'><li class="li_menu">津波</li></a>

        <a href='https://dpnote.netlify.app/test/categories/%E7%81%AB%E7%81%BD/'><li class="li_menu">火災</li></a>

        <a href='https://dpnote.netlify.app/test/categories/%E3%81%9D%E3%81%AE%E4%BB%96%E7%81%BD%E5%AE%B3/'><li class="li_menu">その他災害</li></a>
       
        <a href='https://dpnote.netlify.app/test/categories/%E9%98%B2%E7%81%BDdx/'><li class="li_menu">防災DX</li></a>
                   
      </ul>
    </div>

    <h2 class="mt-4 taxonomy" id="tags-section">Tag</h2>

      
        <a href="/tags/bsdx" id="button">bsdx</a>
      
        <a href="/tags/earthquake" id="button">earthquake</a>
      
        <a href="/tags/fire" id="button">fire</a>
      
        <a href="/tags/other" id="button">other</a>
      
        <a href="/tags/tsunami" id="button">tsunami</a>
      
        <a href="/tags/windflood" id="button">windflood</a>
      
        <a href="/tags/%E5%B2%A9%E6%89%8B%E5%AE%AE%E5%9F%8E%E5%86%85%E9%99%B8%E5%9C%B0%E9%9C%87" id="button">岩手宮城内陸地震</a>
      

  </section>
</aside>

      

    </div>
  </main>

<footer class="footer">
  <div class="foot">
  <a href="https://creativecommons.org/licenses/by/4.0/deed.ja" target="_blank"><img src="https://dpnote.netlify.app/images/license.png" alt="CC BY 4.0 license"></a>
  <p>投稿した記事は、<a href="https://creativecommons.org/licenses/by/4.0/deed.ja" target="_blank" class="footer_link">CC BY 4.0 <i class="fas fa-external-link-alt"></i></a> のもと公開しています。</p>
  <center>

    <a href="https://github.com/linkevery2s" target="_blank"><div class="circle2"><i class="fab fa-github"></i></div></a><a href="https://docs.google.com/forms/d/e/1FAIpQLSf-WMoBJRTdA1bmN_SmQ-bsNGeLs1l737d3c9BUNuErjH-KBw/viewform" target="_blank"><div class="circle4"><i class="far fa-envelope"></i></div></a><a href="https://dpnote.netlify.app/index.xml" target="_blank"><div class="circle3"><i class="fas fa-rss-square"></i></div></a>

    <br>
    <img src="https://dpnote.netlify.app/images/qr_dpnote.png">
    <br>

    <div class="fb-share-button" data-href="https://dpnote.netlify.app/" data-layout="button_count"
    data-size="small"></div>

    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v19.0"
      nonce="Pm3nh7PB"></script>

    <br>
    <i class="fa fa-copyright" aria-hidden="true"></i> <a href="https://hitoshi2s.netlify.app/index.html" target="_blank" class="footer_link">齋藤 仁志</a>. By <a href="https://gohugo.io/" target="_blank" class="footer_link">hugo</a> themes <a href="https://themes.gohugo.io/themes/hugo-clarity/"  target="_blank" class="footer_link">Clarity</a>
    </center>
  </div>
</footer>


  <script src="data.js"></script>

  <script type="module">

    let i_bunkatu = 10;

   
    onload = async () => {
      result.innerHTML = "";

      let kensaku = text.value;

      const max = data.length;
      let count = 0;



      let b = Math.ceil( max / i_bunkatu ) ;
      console.log(b);

      koumoku.innerHTML = "";

      let bunkatu =[];

      for (let i = 0; i< b; i++){
        let v = i + 1;
        koumoku.innerHTML += '<li onclick="kirikae(' + v + ')">' + v + '</li>';

        bunkatu[i] ="";

        for (let mm = 0; mm < i_bunkatu; mm++) {

          if (i * i_bunkatu + mm < max){

            bunkatu[i] += '<div class="item">' +
            "<a href='" + data[i * i_bunkatu + mm].url + "'>" + '<span class="item_title">' + data[i * i_bunkatu + mm].title + '</span>' + "</a>" +
            '<div class="item_ex">' + data[i * i_bunkatu + mm].body + '</div>' +
            '</div>';

            count = count + 1;

          }
          else{}
        }

      }

      result.innerHTML = bunkatu[0];

      let list = document.querySelector("#page_list");
      list.childNodes[0].childNodes[0].style.backgroundColor = "#007bbb";
      list.childNodes[0].childNodes[0].style.color = "#ffffff";

      resultCount.innerHTML = '<b>' + count + '</b> 件見つかりました（' + max + '件中）';

      window.kirikae = (x) =>{

        result.innerHTML = "";

        result.innerHTML = bunkatu[x-1];

        for (let i = 0; i < b; i++){

          if(i == x-1){

            list.childNodes[0].childNodes[i].style.backgroundColor = "#007bbb";
            list.childNodes[0].childNodes[i].style.color = "#ffffff";

          }else{

            list.childNodes[0].childNodes[i].style.backgroundColor = "#ffffff";
            list.childNodes[0].childNodes[i].style.color = "#007bbb";

          }



        }

      }

    }


 
document.querySelector('.search').addEventListener('click',

      async () => {

        if(text.value != ""){

          result.innerHTML = "";
          koumoku.innerHTML = "";

          let kensaku = text.value;

          let kensaku_arr =[];

        


          const max = data.length;
          let count = 0;

          for (let j = 0; j < max; j++) {
            if (data[j].title.indexOf(kensaku) != -1 || data[j].body.indexOf(kensaku) != -1) {
              kensaku_arr[j] = '<div class="item">' +
              "<a href='" + data[j].url + "'>" + '<span class="item_title">' + data[j].title.replaceAll(kensaku, "<b>" + kensaku + "</b>") + '</span>' + "</a>" +
              '<div class="item_ex">' + data[j].body.replaceAll(kensaku, "<b>" + kensaku + "</b>") + '</div>' +
              '</div>';
            }else{
              kensaku_arr[j] = "";
            }
          }

          let new_arr = kensaku_arr.filter(function(x){
            return !(x == ""); 
          })
          console.log(new_arr);

          count = new_arr.length;

          let b = Math.ceil( count / i_bunkatu ) ;
          console.log(b);

         
          if(b == 0){
            result.innerHTML = "検索結果はありませんでした。別のキーワードを入力してください。";
            resultCount.innerHTML = '<b>' + b + '</b> 件見つかりました（' + max + '件中）';
            return false;
          }else{}

          let bunkatu2 =[];


          for (let i = 0; i< b; i++){
            let v = i + 1;
            koumoku.innerHTML += '<li onclick="kirikae2(' + v + ')">' + v + '</li>';

            bunkatu2[i] =　"";

            for (let mm = 0; mm < i_bunkatu; mm++) {

              if (i * i_bunkatu + mm < count){

                bunkatu2[i] += new_arr[i * i_bunkatu + mm];
              }
              else{}
            }

          }


          result.innerHTML = bunkatu2[0];

          let list = document.querySelector("#page_list");
          list.childNodes[0].childNodes[0].style.backgroundColor = "#007bbb";
          list.childNodes[0].childNodes[0].style.color = "#ffffff";

          resultCount.innerHTML = '<b>' + count + '</b> 件見つかりました（' + max + '件中）';

          window.kirikae2 = (x) =>{

            result.innerHTML = "";

            result.innerHTML = bunkatu2[x-1];

            let list = document.querySelector("#page_list");

            for (let i = 0; i < b; i++){

              if(i == x-1){

                list.childNodes[0].childNodes[i].style.backgroundColor = "#007bbb";
                list.childNodes[0].childNodes[i].style.color = "#ffffff";

              }else{

                list.childNodes[0].childNodes[i].style.backgroundColor = "#ffffff";
                list.childNodes[0].childNodes[i].style.color = "#007bbb";

              }

            }
          }

        }else{

          window.location.reload();
        }

      }

      );

    


    </script>
 
  </body>

  </html>